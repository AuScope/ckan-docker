{% import "macros/form.html" as form %}

<style>
.loader {
    border: 16px solid #f3f3f3;
    border-top: 16px solid #3498db;
    border-radius: 50%;
    width: 120px;
    height: 120px;
    animation: spin 2s linear infinite;
    position: fixed;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    z-index: 1000;
    display: none;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
</style>

<form id="dataset-edit" method="post" action="{{ action }}" data-module="basic-form" novalidate enctype="multipart/form-data">

  <div class="row" style="margin-bottom: 50px;">
    <div class="col-sm-9">
      <h1>Upload batch sample metadata</h1>
    </div>
    <div class="col-sm-3 float-right">
      <a href="/path/to/preformatted_template.xlsx" class="btn btn-link" download>
        <i class="fas fa-upload"></i> Download Template
      </a>
    </div>
  </div>

  <div class="form-group control-full">
    <div class="input-group">
      <input id="field-batch-upload" type="file" name="file" value="" placeholder="" class="form-control" accept=".xlsx,.xls">
      <span class="input-group-btn">
        <button type="button" class="btn btn-danger btn-remove-url" style="top: 0px;" onclick="
              var uploadField = document.getElementById('field-batch-upload');
              uploadField.value = ''; 
            ">Remove</button>
      </span>
    </div>
  </div>

  {% block form_actions %}
  <div class="form-actions">
    {% block save_button %}
    <button class="btn btn-primary" style="margin-top: 50px;" type="submit" name="save">{% block save_button_text %}{{ _('Submit') }}{% endblock %}</button>
    {% endblock %}
  </div>
  {% endblock %}
</form>

<div id="loader" class="loader"></div>

<script>
document.getElementById('dataset-edit').onsubmit = function() {
    document.getElementById('loader').style.display = 'block';
};

window.onload = function() {
    document.getElementById('loader').style.display = 'none';
};
</script>
